class Navigation{constructor(navElement){this.nav = navElement;this.toggle = document.getElementById('nav-toggle');this.mobileMenu = document.getElementById('mobile-menu');this.links = navElement.querySelectorAll('a[href^="#"]');this.sections = [];this.links.forEach(link =>{const href = link.getAttribute('href');if(href && href.startsWith('#')){const section = document.querySelector(href);if(section){this.sections.push({id:href.substring(1),element:section,link:link});}}});}init(){this.setupToggle();this.setupSmoothScroll();this.setupActiveLink();}setupToggle(){if(!this.toggle || !this.mobileMenu)return;this.toggle.addEventListener('click',()=>{this.mobileMenu.classList.toggle('hidden');const isExpanded = !this.mobileMenu.classList.contains('hidden');this.toggle.setAttribute('aria-expanded',isExpanded);});this.links.forEach(link =>{link.addEventListener('click',()=>{if(!this.mobileMenu.classList.contains('hidden')){this.mobileMenu.classList.add('hidden');this.toggle.setAttribute('aria-expanded','false');}});});document.addEventListener('click',(e)=>{if(!this.nav.contains(e.target)&& !this.mobileMenu.classList.contains('hidden')){this.mobileMenu.classList.add('hidden');this.toggle.setAttribute('aria-expanded','false');}});}setupSmoothScroll(){this.links.forEach(link =>{link.addEventListener('click',(e)=>{const href = link.getAttribute('href');if(href && href.startsWith('#')){e.preventDefault();const targetId = href.substring(1);const targetSection = document.getElementById(targetId);if(targetSection){const navHeight = this.nav.offsetHeight;const targetPosition = targetSection.offsetTop - navHeight;window.scrollTo({top:targetPosition,behavior:'smooth'});}}});});}setupActiveLink(){let ticking = false;const updateActiveLink =()=>{const scrollPosition = window.scrollY + this.nav.offsetHeight + 100;let currentSection = null;for(let i = this.sections.length - 1;i >= 0;i--){const section = this.sections[i];if(section.element.offsetTop <= scrollPosition){currentSection = section;break;}}this.links.forEach(link =>{link.classList.remove('text-blue-600');link.classList.add('text-gray-700');});if(currentSection){currentSection.link.classList.remove('text-gray-700');currentSection.link.classList.add('text-blue-600');}ticking = false;};window.addEventListener('scroll',()=>{if(!ticking){window.requestAnimationFrame(updateActiveLink);ticking = true;}});updateActiveLink();}}document.addEventListener('DOMContentLoaded',()=>{const navElement = document.querySelector('nav[role="navigation"]');if(navElement){const navigation = new Navigation(navElement);navigation.init();}});